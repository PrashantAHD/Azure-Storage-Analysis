# Azure Storage Analysis

## Overview
This project provides a comprehensive analysis of Azure Storage usage and costs. It processes Azure storage data, generates enhanced reports, and offers actionable recommendations to optimize storage usage and reduce costs.

## Analysis Scope
- **Data Sources:**
  - Raw Azure storage usage and billing CSV exports
   - Enhanced Excel reports generated by the analysis tool
- **Metrics Analyzed:**
  - Storage account usage (by type, region, and SKU)
  - Cost breakdowns (monthly, by resource, by storage class)
  - Growth trends and historical usage
  - Unused or underutilized storage resources
  - Recommendations for cost savings and optimization

## Recommendations Provided
- Identify unused or infrequently accessed storage accounts and blobs
- Suggest moving data to lower-cost storage tiers (e.g., Cool, Archive)
- Highlight opportunities for lifecycle management and automation
- Recommend deletion or consolidation of redundant resources
- Provide insights on data redundancy and geo-replication settings

## Project Structure
- `azure_storage_analysis/`: Core package with modular analysis logic (all main logic is here)
   - `core.py`, `auth.py`, `reporting.py`, `recommendations.py`, `utils.py`
- `cli.py`: Main entry point to run the analysis (imports from the package above)
- `azure_storage_analysis_*.csv`: Raw Azure storage data exports
- `azure_storage_analysis_enhanced_*.xlsx`: Enhanced analysis reports
- `requirements.txt`: Python dependencies

## How to Run the Analysis


### Prerequisites
- Python 3.8 or higher
- Required Python packages (see below)
- Azure CLI (for authentication and subscription management)
- Azure storage usage CSV export (download from Azure Portal)

#### Azure CLI Setup
1. Download and install the Azure CLI from the official site:
   https://docs.microsoft.com/en-us/cli/azure/install-azure-cli
2. After installation, open a new terminal and run:
   ```powershell
   az login
   ```
   This will open a browser window for you to authenticate with your Azure account.
3. (Optional) Set your default subscription:
   ```powershell
   az account set --subscription "<your-subscription-name-or-id>"
   ```
4. Verify your login and subscription:
   ```powershell
   az account show
   ```

### Installation
1. Clone this repository:
   ```powershell
   git clone git@github.com:PrashantAHD/Azure-Storage-Analysis.git
   cd Azure-Storage-Analysis
   ```
2. (Optional) Create and activate a virtual environment:
   ```powershell
   python -m venv venv
   .\venv\Scripts\activate
   ```
3. Install required packages:
   ```powershell
   pip install -r requirements.txt
   ```
   If `requirements.txt` is not present, install common dependencies:
   ```powershell
   pip install pandas openpyxl
   ```

### Usage
1. Place your Azure storage CSV export in the project directory.

2. Run the analysis using the CLI entry point:
   ```powershell
   python cli.py --auto
   ```
   You can use additional command-line options for advanced usage. For help:
   ```powershell
   python cli.py --help
   ```
3. The tool will generate an enhanced Excel report with recommendations.

### Output
- Enhanced Excel report: `azure_storage_analysis_enhanced_<date>.xlsx`
- Summary and recommendations are included in the report

## Customization
- Modify or extend modules in `azure_storage_analysis/` to adjust analysis logic, reporting, or add new features.
- Update the CLI (`cli.py`) to support additional options or workflows.

## Support
For questions or suggestions, please open an issue on the GitHub repository.

## Azure Storage Cost Optimization Resources

### Key Strategies & Best Practices
- **Storage Tiering & Lifecycle Management:**
  - Move infrequently accessed data to Cool, Cold, or Archive tiers.
  - Use lifecycle policies to automate tier transitions and deletions.
  - Be aware of early deletion fees for each tier.
- **Reserved Capacity & Discounts:**
  - Commit to 1- or 3-year reserved capacity for predictable workloads to save up to 38% (storage) or 72% (compute).
  - Use Azure Cost Management to simulate and plan reservations.
- **Monitor, Audit, and Clean Up:**
  - Use Azure Advisor and Cost Management for recommendations and alerts.
  - Delete unused resources (disks, snapshots, storage accounts).
  - Right-size provisioned resources regularly.
- **Optimize Data Transfer and Redundancy:**
  - Minimize data egress by co-locating compute and storage.
  - Choose redundancy (LRS, ZRS, GRS, RA-GRS) based on cost and durability needs.
- **Backup and Encryption:**
  - Use incremental backups, set appropriate retention, and move long-term backups to Archive.
  - Use server-side encryption with managed keys for most scenarios.
- **Cost Management Tools:**
  - Use the [Azure Pricing Calculator](https://azure.microsoft.com/en-us/pricing/calculator/) to estimate costs.
  - Consider third-party tools like Ternary, Turbo360, IBM Cloudability for advanced cost visibility.
- **Case Studies:**
  - Companies like Maersk, ASOS, and H&R Block achieved savings by regular audits, training, and using Azureâ€™s built-in cost management features.

### Useful Links
- [Azure Storage Pricing](https://azure.microsoft.com/en-us/pricing/details/storage/)
- [Azure Blob Storage Pricing](https://azure.microsoft.com/en-us/pricing/details/storage/blobs/)
- [Azure Managed Disks Pricing](https://azure.microsoft.com/en-us/pricing/details/managed-disks/)
- [Azure Advisor Cost Recommendations](https://learn.microsoft.com/en-us/azure/advisor/advisor-reference-cost-recommendations)
- [Azure Storage Access Tiers Overview](https://learn.microsoft.com/en-us/azure/storage/blobs/access-tiers-overview)
- [Azure Blob Lifecycle Management](https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-policy-access-tiers)
- [Azure Cost Management and Billing](https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/overview-cost-management)
- [Azure Pricing Calculator](https://azure.microsoft.com/en-us/pricing/calculator/)
- [CloudZero: Azure Storage Cost Optimization](https://www.cloudzero.com/blog/azure-storage-cost-optimization/)
- [Intercept: Azure Storage Pricing Guide](https://intercept.cloud/en-gb/blogs/azure-storage-pricing)
- [TechTarget: Azure Storage Pricing Guide](https://www.techtarget.com/searchstorage/tip/A-guide-to-Microsoft-Azure-storage-pricing)
- [N2WS: Azure Storage Cost Factors](https://n2ws.com/blog/microsoft-azure-cloud-services/azure-storage-costs)
- [Ternary: Azure Cost Management Tools](https://ternary.app/blog/azure-cost-management-tools/)
- [Medium: Azure Cost Optimization Stories](https://medium.com/@NickHystax/get-inspired-cost-optimization-stories-of-ms-azure-customers-ddf7ebf97042)

### Storage Types and Starting Prices (Sample)
| Storage Type         | Description                                      | Starting Price (per GiB/month) |
|---------------------|--------------------------------------------------|-------------------------------|
| Azure Blob          | Scalable object storage for unstructured data    | $0.015                        |
| Azure Files         | Managed file shares for cloud or on-prem use     | $0.0228                       |
| Azure Table         | NoSQL storage for structured data                | $0.045                        |
| Azure Queues        | Messaging for asynchronous app communication     | $0.045                        |
| Azure Managed Disks | Durable block storage for VMs                    | $0.30                         |

For more details, see the official [Azure Storage Pricing](https://azure.microsoft.com/en-us/pricing/details/storage/) page.

---

**Author:** Prashant Kumar
**Repository:** [Azure-Storage-Analysis](https://github.com/PrashantAHD/Azure-Storage-Analysis)
